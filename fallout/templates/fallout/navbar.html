{% load i18n %}

<ul class="navbar-nav mr-auto">
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" id="campaign-navbar" href="#" data-toggle="dropdown"
           aria-haspopup="true" aria-expanded="false">{{ campaign.name|default:_("Aucune campagne") }}</a>
        <div class="dropdown-menu" aria-labelledby="campaign-navbar">
            <a class="dropdown-item text-secondary" href="{% url 'fallout:index' %}">{% trans "Aucune campagne" %}</a>
            {% with current_campaign=campaign %}
                {% for campaign in campaigns %}
                    <a class="dropdown-item{% if campaign == current_campaign %} active{% endif %}"
                       href="{% url 'fallout:campaign' campaign.id %}">
                        {{ campaign.name }}
                        {% if campaign.title %}<small class="text-muted">{{ campaign.title }}</small>{% endif %}
                    </a>
                {% endfor %}
            {% endwith %}
        </div>
    </li>
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle{% if not characters %} disabled{% endif %}"
           id="campaign-navbar" href="#" data-toggle="dropdown"
           aria-haspopup="true" aria-expanded="false">{{ character.name|default:_("Personnages") }}</a>
        <div class="dropdown-menu" aria-labelledby="campaign-navbar">
            {% with current_character=character %}
                {% for character in characters %}
                    <a class="dropdown-item{% if character == current_character %} active{% endif %}"
                       href="{% url 'fallout:character' character.id %}">
                        {% if not character.is_player %}
                            <small class="badge badge-info">{% trans "PNJ" %}</small>
                        {% else %}
                            <span class="badge badge-warning">{% trans "PJ" %}</span>
                        {% endif %}
                        {% if character.health == 0 %}
                            <small class="badge badge-danger">{% trans "KO" %}</small>
                        {% elif character.campaign.current_character == character %}
                            <small class="badge badge-success">{% trans "Actif" %}</small>
                        {% endif %}
                        {{ character.name }}
                        {% if character.title %}<small class="text-muted">{{ character.title }}</small>{% endif %}
                    </a>
                {% endfor %}
            {% endwith %}
        </div>
    </li>
</ul>
{% if campaign and authorized %}
    <form class="form-inline" method="post" action="{% url 'fallout:next_turn' campaign.id %}">
        <label class="text-white">{{ campaign.current_game_date }}</label>
        <select class="form-control form-control-sm custom-select ml-2 mr-2" name="seconds">
            <option value="0" selected="selected">{% trans "0 s" %}</option>
            <option value="30">{% trans "30 s" %}</option>
            <option value="60">{% trans "1 mn" %}</option>
            <option value="120">{% trans "2 mn" %}</option>
            <option value="300">{% trans "5 mn" %}</option>
            <option value="600">{% trans "10 mn" %}</option>
            <option value="1200">{% trans "20 mn" %}</option>
            <option value="1800">{% trans "30 mn" %}</option>
            <option value="3600">{% trans "1 h" %}</option>
        </select>
        <button class="btn btn-success btn-sm" name="next">{% trans "Tour suivant" %}</button>
        {% csrf_token %}
    </form>
{% endif %}
